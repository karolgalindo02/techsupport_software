<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TechSupport S.A. - An√°lisis Num√©rico</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo-section">
          <div class="logo">
            <img
              src="{{ url_for('static', filename='img/logo.png') }}"
              alt="Icono Workstation"
              class="logo-img"
            />
          </div>
          <div class="title-section">
            <h1>TechSupport S.A.</h1>
            <div class="subtitle">
              Sistema de An√°lisis Num√©rico para Optimizaci√≥n de Procesos
            </div>
          </div>
        </div>

        <div class="metrics-bar">
          <div class="metric-card">
            <div class="metric-value">
              45% ‚Üí <span class="improvement">15%</span>
            </div>
            <div class="metric-label">Meta de Desviaci√≥n</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">
              18% ‚Üí <span class="improvement">8%</span>
            </div>
            <div class="metric-label">Bugs en Producci√≥n</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">
              30% ‚Üí <span class="improvement">12%</span>
            </div>
            <div class="metric-label">Retrabajo</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">
              35% ‚Üí <span class="improvement">15%</span>
            </div>
            <div class="metric-label">Sobrecostos</div>
          </div>
        </div>
      </header>

      <div class="main-content">
        <!-- Columna Izquierda: M√©todos Num√©ricos -->
        <div class="section">
          <h2 class="section-title">M√©todos Num√©ricos</h2>

          <div class="tab-container">
            <div class="tabs">
              <div class="tab active" onclick="switchTab(1)">
                Regresi√≥n Lineal
              </div>
              <div class="tab" onclick="switchTab(2)">M√©todo de Newton</div>
              <div class="tab" onclick="switchTab(3)">Falsa Posici√≥n</div>
              <div class="tab" onclick="switchTab(4)">Runge-Kutta</div>
              <div class="tab" onclick="switchTab(5)">M√©todo de Euler</div>
            </div>

            <!-- Tab 1: Regresi√≥n Lineal -->
            <div class="tab-content active" id="tab1">
              <div class="method-info">
                <h4>üìä Regresi√≥n Lineal M√∫ltiple</h4>
                <p>
                  Predice el tiempo de desarrollo en funci√≥n de complejidad,
                  l√≠neas de c√≥digo y experiencia del desarrollador.
                </p>
                <p><strong>F√≥rmula:</strong> T = 2.1C + 5.8L + 8.5E</p>
              </div>

              <div class="form-group">
                <label>Complejidad del M√≥dulo (1-10):</label>
                <input
                  type="number"
                  id="complejidad"
                  class="form-control"
                  min="1"
                  max="10"
                  value="3"
                  step="0.1"
                />
              </div>

              <div class="form-group">
                <label>L√≠neas de C√≥digo (miles):</label>
                <input
                  type="number"
                  id="lineas"
                  class="form-control"
                  min="1"
                  max="50"
                  value="5"
                  step="0.1"
                />
              </div>

              <div class="form-group">
                <label>Experiencia del Desarrollador (1-5):</label>
                <input
                  type="number"
                  id="experiencia"
                  class="form-control"
                  min="1"
                  max="5"
                  value="3"
                  step="0.1"
                />
              </div>

              <button class="btn" onclick="predecirTiempo()">
                ‚è±Ô∏è Predecir Tiempo
              </button>

              <div
                id="resultadoRegresion"
                class="result-card"
                style="display: none"
              >
                <div class="result-title">Tiempo Estimado</div>
                <div class="result-value" id="tiempoEstimado"></div>
                <div
                  id="formulaPrediccion"
                  style="color: #7f8c8d; margin-top: 10px"
                ></div>
              </div>
            </div>

            <!-- Tab 2: M√©todo de Newton -->
            <div class="tab-content" id="tab2">
              <div class="method-info">
                <h4>üîç M√©todo de Newton-Raphson</h4>
                <p>
                  Encuentra las horas de correcci√≥n necesarias para alcanzar la
                  meta de desviaci√≥n del 15%.
                </p>
                <p><strong>Funci√≥n:</strong> d(h) = 0.8e^(-0.05h) + 0.05</p>
              </div>

              <div class="form-group">
                <label>Horas Iniciales de Correcci√≥n:</label>
                <input
                  type="number"
                  id="h_inicial"
                  class="form-control"
                  value="30"
                  step="1"
                />
              </div>

              <div class="form-group">
                <label>Meta de Desviaci√≥n (%):</label>
                <input
                  type="number"
                  id="meta_desviacion"
                  class="form-control"
                  value="15"
                  step="0.1"
                />
              </div>

              <button class="btn" onclick="calcularNewton()">
                üîÑ Ejecutar Newton
              </button>

              <div
                id="resultadoNewton"
                class="result-card"
                style="display: none"
              >
                <div class="result-title">Iteraciones del M√©todo de Newton</div>
                <div id="tablaIteraciones"></div>
              </div>
            </div>

            <!-- Tab 3: Falsa Posici√≥n -->
            <div class="tab-content" id="tab3">
              <div class="method-info">
                <h4>üìê M√©todo de la Falsa Posici√≥n (Regula Falsi)</h4>
                <p>
                  Calcula las horas de correcci√≥n necesarias usando un m√©todo de
                  intervalos.
                </p>
              </div>

              <div class="form-group">
                <label>Intervalo Inferior (h):</label>
                <input
                  type="number"
                  id="intervalo_a"
                  class="form-control"
                  value="20"
                />
                <small>Desviaci√≥n: 45%</small>
              </div>

              <div class="form-group">
                <label>Intervalo Superior (h):</label>
                <input
                  type="number"
                  id="intervalo_b"
                  class="form-control"
                  value="40"
                />
                <small>Desviaci√≥n: 10%</small>
              </div>

              <button class="btn" onclick="calcularFalsaPosicion()">
                üìä Calcular Falsa Posici√≥n
              </button>

              <div
                id="resultadoFalsaPosicion"
                class="result-card"
                style="display: none"
              >
                <div class="result-title">Resultado</div>
                <div class="result-value" id="horasFalsaPosicion"></div>
                <div
                  id="porcentajeCapacidad"
                  style="color: #7f8c8d; margin-top: 10px"
                ></div>
              </div>
            </div>

            <!-- Tab 4: Runge-Kutta -->
            <div class="tab-content" id="tab4">
              <div class="method-info">
                <h4>üìà M√©todo de Runge-Kutta (RK4)</h4>
                <p>
                  Simula la evoluci√≥n de bugs en producci√≥n a lo largo del
                  tiempo usando ecuaciones diferenciales.
                </p>
              </div>

              <div class="form-group">
                <label>Bugs Iniciales en Producci√≥n:</label>
                <input
                  type="number"
                  id="bugs_iniciales"
                  class="form-control"
                  value="120"
                />
              </div>

              <div class="form-group">
                <label>D√≠as de Simulaci√≥n:</label>
                <input
                  type="number"
                  id="dias_simulacion"
                  class="form-control"
                  value="30"
                />
              </div>

              <button class="btn" onclick="simularRungeKutta()">
                üöÄ Simular con RK4
              </button>

              <div class="chart-container">
                <canvas id="rk4Chart"></canvas>
              </div>
            </div>

            <!-- Tab 5: M√©todo de Euler -->
            <div class="tab-content" id="tab5">
              <div class="method-info">
                <h4>üìâ M√©todo de Euler</h4>
                <p>
                  Simula m√∫ltiples m√©tricas del proyecto usando aproximaciones
                  lineales.
                </p>
              </div>

              <div class="form-group">
                <label>Bugs Iniciales:</label>
                <input
                  type="number"
                  id="euler_bugs"
                  class="form-control"
                  value="120"
                />
              </div>

              <div class="form-group">
                <label>L√≠neas de C√≥digo Iniciales:</label>
                <input
                  type="number"
                  id="euler_lineas"
                  class="form-control"
                  value="50000"
                />
              </div>

              <button class="btn" onclick="simularEuler()">
                üìä Simular con Euler
              </button>

              <div class="chart-container">
                <canvas id="eulerChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Columna Derecha: Resultados y Visualizaciones -->
        <div class="section">
          <h2 class="section-title">Resultados y An√°lisis</h2>

          <div class="result-card">
            <div class="result-title">Estado Actual del Proyecto</div>
            <div id="estadoProyecto">
              <p>
                üìÖ <strong>Desviaci√≥n Actual:</strong>
                <span id="desviacionActual">45%</span>
              </p>
              <p>
                üêõ <strong>Bugs en Producci√≥n:</strong>
                <span id="bugsActual">18%</span>
              </p>
              <p>
                üîÑ <strong>Retrabajo:</strong>
                <span id="retrabajoActual">30%</span>
              </p>
              <p>
                üí∞ <strong>Sobrecostos:</strong>
                <span id="sobrecostosActual">35%</span>
              </p>
            </div>
          </div>

          <div class="result-card">
            <div class="result-title">Recomendaciones del Modelo</div>
            <div id="recomendaciones">
              <div class="loading">
                <div class="loading-spinner"></div>
                <p>Calculando recomendaciones...</p>
              </div>
            </div>
          </div>

          <div class="result-card">
            <div class="result-title">Comparaci√≥n de M√©todos</div>
            <div class="chart-container">
              <canvas id="comparacionChart"></canvas>
            </div>
          </div>

          <div class="btn-group">
            <button class="btn btn-secondary" onclick="generarReporte()">
              üìÑ Generar Reporte
            </button>
            <button class="btn btn-success" onclick="exportarDatos()">
              üìä Exportar Datos
            </button>
            <button class="btn" onclick="resetearModelo()">
              üîÑ Resetear Modelo
            </button>
          </div>
        </div>
      </div>

      <footer>
        <p>¬© 2025 TechSupport S.A.</p>
        <p>Desarrollado by Karol Galindo</p>
      </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
